#finding the actual days between
dt <- dt %>%
mutate(DaysBetween1and2 = ifelse(date2!=0 & date1!=0, date2-date1, NA)) %>%
mutate(DaysBetween2and3 = ifelse(date3!=0 & date2!=0, date3-date2, NA)) %>%
mutate(DaysBetween3and4 = ifelse(date4!=0 & date3!=0, date4-date3, NA)) %>%
mutate(DaysBetween4and5 = ifelse(date5!=0 & date4!=0, date5-date4, NA))
#find the mean days between
dt <- dt %>%
select(DaysBetween1and2, DaysBetween2and3, DaysBetween3and4, DaysBetween4and5) %>%
summarise_all(funs(mean(.,na.rm=TRUE)))
#transpose so I can create a bar chart of it
meandaysbtw <- dt %>%
gather(DaysBetween1and2, DaysBetween2and3, DaysBetween3and4, DaysBetween4and5, 1:4) %>%
rename(daysbtw = DaysBetween1and2) %>%
rename(mean = DaysBetween2and3)
##i'm going to create a dataset of the mean scores for each variable, including the achievement score and final score.
meanall <- ccdata9 %>%
ungroup() %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(mean(.,na.rm=TRUE)))
meanall <- meanall %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, mean= `Food&Nutrition`)
##Now I'm creating a dataset that finds the difference in means between first and second scores
meanall1 <- ccdata9 %>%
ungroup() %>%
filter(rank==1|rank==1.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(mean(.,na.rm=TRUE)))
meanall1 <- meanall1 %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, mean= `Food&Nutrition`)
meanall2 <- ccdata9 %>%
filter(rank==2|rank==2.5) %>%
ungroup() %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(mean(.,na.rm=TRUE)))
meanall2 <- meanall2 %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, mean= `Food&Nutrition`)
meanalldiff <- meanall1 %>%
mutate(diff = meanall2$mean - meanall1$mean)
##I'm going to add standard deviations so I can make a different type of graph
sdall1 <- ccdata9 %>%
ungroup() %>%
filter(rank==1|rank==1.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(sd(.)))
sdall1 <- sdall1 %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, sd= `Food&Nutrition`)
mergeall1 <- right_join(meanall1, sdall1, by = "score")
sdall2 <- ccdata9 %>%
ungroup() %>%
filter(rank==2|rank==2.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(sd(.)))
sdall2 <- sdall2 %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, sd= `Food&Nutrition`)
mergeall2 <- right_join(meanall2, sdall2, by = "score")
mergeall2 <- mergeall2 %>%
mutate(Group = "Second")
mergeall1 <- mergeall1 %>%
mutate(Group = "First")
## this is my final dataset with both groups, their means, and their standard deviations. I make the graph in the section below
mergeall <- bind_rows(mergeall1, mergeall2)
##well, let's get standard errors
seall1 <- ccdata9 %>%
ungroup() %>%
filter(rank==1|rank==1.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(std.error(.)))
seall1 <- seall1 %>%
#rename(Shelter = Shelter_se, `Food&Nutrition` = `Food&Nutrition_se`, Employment = Employment_se, Income = Income_se, AdultFormalEducation = AdultFormalEducation_se, Transportation = Transportation_se, ChildCare = ChildCare_se, SubstanceAbuse = SubstanceAbuse_se, PhysicalMentalHealth= PhysicalMentalHealth_se, HealthInsurance = HealthInsurance_se, FamilySocialFunctioning = FamilySocialFunctioning_se, PriorityLevelScore = PriorityLevelScore_se, BarriersScore = BarriersScore_se, AchievementsScore = AchievementsScore_se, FinalScore = FinalScore_se) %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, sd= `Food&Nutrition`)
seall2 <- ccdata9 %>%
ungroup() %>%
filter(rank==2|rank==2.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(std.error(.)))
seall2 <- seall2 %>%
#rename(Shelter = Shelter_se, `Food&Nutrition` = `Food&Nutrition_se`, Employment = Employment_se, Income = Income_se, AdultFormalEducation = AdultFormalEducation_se, Transportation = Transportation_se, ChildCare = ChildCare_se, SubstanceAbuse = SubstanceAbuse_se, PhysicalMentalHealth= PhysicalMentalHealth_se, HealthInsurance = HealthInsurance_se, FamilySocialFunctioning = FamilySocialFunctioning_se, PriorityLevelScore = PriorityLevelScore_se, BarriersScore = BarriersScore_se, AchievementsScore = AchievementsScore_se, FinalScore = FinalScore_se) %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, sd= `Food&Nutrition`)
mergeallse1 <- right_join(meanall1, seall1, by = "score")
mergeallse2 <- right_join(meanall2, seall2, by = "score")
mergeallse2 <- mergeallse2 %>%
mutate(Group = "Second")
mergeallse1 <- mergeallse1 %>%
mutate(Group = "First")
## this is my final dataset with both groups, their means, and their standard deviations. I make the graph in the section below
mergeallse <- bind_rows(mergeallse1, mergeallse2)
ccdata3$Date <- as.Date(ccdata3$`Date`, "%Y/%m/%d")
## create a variable ranking the client ids by date
ccdata9 <- ccdata %>%
group_by(HMIS_ClientID) %>%
mutate(rank = rank(Date))
ccdata9 %>%
group_by(rank) %>%
tally()
## create a variable counting the number of times a client id appears
ccdata9 <- ccdata9 %>%
group_by(HMIS_ClientID) %>%
mutate(count = n())
ccdata9 %>%
group_by(count) %>%
tally()
## a long form attempt at finding the days between ss assessments
ccdata10 <- ccdata9 %>%
group_by(HMIS_ClientID) %>%
mutate(date1 = ifelse(rank==1|rank==1.5, as_date(Date), 0)) %>%
mutate(date2 = ifelse(rank==2|rank==2.5, as_date(Date), 0)) %>%
mutate(date3 = ifelse(rank==3|rank==3.5, as_date(Date), 0)) %>%
mutate(date4 = ifelse(rank==4|rank==4.5, as_date(Date), 0)) %>%
mutate(date5 = ifelse(rank==5|rank==5.5, as_date(Date), 0)) %>%
select(HMIS_ClientID, Date, date1, date2, date3, date4, date5)
##i had to use data table package to collapse shit ugh
DT <- data.table(ccdata10, key="HMIS_ClientID")
dt <- DT[, list(date1=max(date1),
date2=max(date2),
date3=max(date3),
date4=max(date4),
date5=max(date5)), by=HMIS_ClientID]
#finding the actual days between
dt <- dt %>%
mutate(DaysBetween1and2 = ifelse(date2!=0 & date1!=0, date2-date1, NA)) %>%
mutate(DaysBetween2and3 = ifelse(date3!=0 & date2!=0, date3-date2, NA)) %>%
mutate(DaysBetween3and4 = ifelse(date4!=0 & date3!=0, date4-date3, NA)) %>%
mutate(DaysBetween4and5 = ifelse(date5!=0 & date4!=0, date5-date4, NA))
#find the mean days between
dt <- dt %>%
select(DaysBetween1and2, DaysBetween2and3, DaysBetween3and4, DaysBetween4and5) %>%
summarise_all(funs(mean(.,na.rm=TRUE)))
#transpose so I can create a bar chart of it
meandaysbtw <- dt %>%
gather(DaysBetween1and2, DaysBetween2and3, DaysBetween3and4, DaysBetween4and5, 1:4) %>%
rename(daysbtw = DaysBetween1and2) %>%
rename(mean = DaysBetween2and3)
##i'm going to create a dataset of the mean scores for each variable, including the achievement score and final score.
meanall <- ccdata9 %>%
ungroup() %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(mean(.,na.rm=TRUE)))
meanall <- meanall %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, mean= `Food&Nutrition`)
##Now I'm creating a dataset that finds the difference in means between first and second scores
meanall1 <- ccdata9 %>%
ungroup() %>%
filter(rank==1|rank==1.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(mean(.,na.rm=TRUE)))
meanall1 <- meanall1 %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, mean= `Food&Nutrition`)
meanall2 <- ccdata9 %>%
filter(rank==2|rank==2.5) %>%
ungroup() %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(mean(.,na.rm=TRUE)))
meanall2 <- meanall2 %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, mean= `Food&Nutrition`)
meanalldiff <- meanall1 %>%
mutate(diff = meanall2$mean - meanall1$mean)
##I'm going to add standard deviations so I can make a different type of graph
sdall1 <- ccdata9 %>%
ungroup() %>%
filter(rank==1|rank==1.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(sd(.)))
sdall1 <- sdall1 %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, sd= `Food&Nutrition`)
mergeall1 <- right_join(meanall1, sdall1, by = "score")
sdall2 <- ccdata9 %>%
ungroup() %>%
filter(rank==2|rank==2.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(sd(.)))
sdall2 <- sdall2 %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, sd= `Food&Nutrition`)
mergeall2 <- right_join(meanall2, sdall2, by = "score")
mergeall2 <- mergeall2 %>%
mutate(Group = "Second")
mergeall1 <- mergeall1 %>%
mutate(Group = "First")
## this is my final dataset with both groups, their means, and their standard deviations. I make the graph in the section below
mergeall <- bind_rows(mergeall1, mergeall2)
##well, let's get standard errors
seall1 <- ccdata9 %>%
ungroup() %>%
filter(rank==1|rank==1.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(std.error(.)))
seall1 <- seall1 %>%
#rename(Shelter = Shelter_se, `Food&Nutrition` = `Food&Nutrition_se`, Employment = Employment_se, Income = Income_se, AdultFormalEducation = AdultFormalEducation_se, Transportation = Transportation_se, ChildCare = ChildCare_se, SubstanceAbuse = SubstanceAbuse_se, PhysicalMentalHealth= PhysicalMentalHealth_se, HealthInsurance = HealthInsurance_se, FamilySocialFunctioning = FamilySocialFunctioning_se, PriorityLevelScore = PriorityLevelScore_se, BarriersScore = BarriersScore_se, AchievementsScore = AchievementsScore_se, FinalScore = FinalScore_se) %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, sd= `Food&Nutrition`)
seall2 <- ccdata9 %>%
ungroup() %>%
filter(rank==2|rank==2.5) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(std.error(.)))
seall2 <- seall2 %>%
#rename(Shelter = Shelter_se, `Food&Nutrition` = `Food&Nutrition_se`, Employment = Employment_se, Income = Income_se, AdultFormalEducation = AdultFormalEducation_se, Transportation = Transportation_se, ChildCare = ChildCare_se, SubstanceAbuse = SubstanceAbuse_se, PhysicalMentalHealth= PhysicalMentalHealth_se, HealthInsurance = HealthInsurance_se, FamilySocialFunctioning = FamilySocialFunctioning_se, PriorityLevelScore = PriorityLevelScore_se, BarriersScore = BarriersScore_se, AchievementsScore = AchievementsScore_se, FinalScore = FinalScore_se) %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, sd= `Food&Nutrition`)
mergeallse1 <- right_join(meanall1, seall1, by = "score")
mergeallse2 <- right_join(meanall2, seall2, by = "score")
mergeallse2 <- mergeallse2 %>%
mutate(Group = "Second")
mergeallse1 <- mergeallse1 %>%
mutate(Group = "First")
## this is my final dataset with both groups, their means, and their standard deviations. I make the graph in the section below
mergeallse <- bind_rows(mergeallse1, mergeallse2)
ccdata <- read_excel("~/Google Drive/SI/DataScience/ADP/Catholic_Charities_Chicago/Family SSS/Family Self-Sufficiency Scale ALL.xlsx")
# ccdata %>%
#   group_by(HMIS_ClientID) %>%
#   tally() %>%
#   arrange(desc(n))
score <- read.csv("~/Google Drive/SI/DataScience/ADP/Catholic_Charities_Chicago/Family SSS/scoreformerge.csv")
score1 <- score %>%
select(Shelter, Shelter_Description)
ccdata2 <- right_join(score1, ccdata, by = "Shelter")
score1 <- score %>%
select("Food.Nutrition", "F.N_Description") %>%
rename("Food&Nutrition" = "Food.Nutrition")
ccdata2 <- right_join(score1, ccdata2, by = "Food&Nutrition")
score1 <- score %>%
select(Employment, Emp_Description)
ccdata2 <- right_join(score1, ccdata2, by = "Employment")
score1 <- score %>%
select(Income, Inc_Description)
ccdata2 <- right_join(score1, ccdata2, by = "Income")
score1 <- score %>%
select(AdultFormalEducation, AFE_Description)
ccdata2 <- right_join(score1, ccdata2, by = "AdultFormalEducation")
score1 <- score %>%
select(Transportation, Trans_Description)
ccdata2 <- right_join(score1, ccdata2, by = "Transportation")
score1 <- score %>%
select(ChildCare, ChC_Description)
ccdata2 <- right_join(score1, ccdata2, by = "ChildCare")
score1 <- score %>%
select(SubstanceAbuse, SA_Description)
ccdata2 <- right_join(score1, ccdata2, by = "SubstanceAbuse")
score1 <- score %>%
select(PhysicalMentalHealth, PhMH_Description)
ccdata2 <- right_join(score1, ccdata2, by ="PhysicalMentalHealth")
score1 <- score %>%
select(HealthInsurance, HI_Description)
ccdata2 <- right_join(score1, ccdata2, by = "HealthInsurance")
score1 <- score %>%
select(FamilySocialFunctioning, FSF_Description)
ccdata2 <- right_join(score1, ccdata2, by = "FamilySocialFunctioning")
# ccdata2 <- ccdata2 %>%
#    mutate(Shelter_Description = ifelse(is.na(Shelter_Description), Shelter, Shelter_Description))
ccdata3 <- ccdata2 %>%
mutate(Shelter=as.character(Shelter)) %>%
mutate(Shelter_Description = paste(Shelter, Shelter_Description, sep=". ")) %>%
mutate(Shelter=as.numeric(Shelter)) %>%
mutate(FamilySocialFunctioning=as.character(FamilySocialFunctioning)) %>%
mutate(FSF_Description = paste(FamilySocialFunctioning, FSF_Description, sep=". ")) %>%
mutate(FamilySocialFunctioning=as.numeric(FamilySocialFunctioning)) %>%
mutate(HealthInsurance=as.character(HealthInsurance)) %>%
mutate(HI_Description = paste(HealthInsurance, HI_Description, sep=". ")) %>%
mutate(HealthInsurance=as.numeric(HealthInsurance)) %>%
mutate(PhysicalMentalHealth=as.character(PhysicalMentalHealth)) %>%
mutate(PhMH_Description = paste(PhysicalMentalHealth, PhMH_Description, sep=". ")) %>%
mutate(PhysicalMentalHealth=as.numeric(PhysicalMentalHealth)) %>%
mutate(SubstanceAbuse=as.character(SubstanceAbuse)) %>%
mutate(SA_Description = paste(SubstanceAbuse, SA_Description, sep=". ")) %>%
mutate(SubstanceAbuse=as.numeric(SubstanceAbuse)) %>%
mutate(ChildCare=as.character(ChildCare)) %>%
mutate(ChC_Description = paste(ChildCare, ChC_Description, sep=". ")) %>%
mutate(ChildCare=as.numeric(ChildCare)) %>%
mutate(Transportation=as.character(Transportation)) %>%
mutate(Trans_Description = paste(Transportation, Trans_Description, sep=". ")) %>%
mutate(Transportation=as.numeric(Transportation)) %>%
mutate(AdultFormalEducation=as.character(AdultFormalEducation)) %>%
mutate(AFE_Description = paste(AdultFormalEducation, AFE_Description, sep=". ")) %>%
mutate(AdultFormalEducation=as.numeric(AdultFormalEducation)) %>%
mutate(Income=as.character(Income)) %>%
mutate(Inc_Description = paste(Income, Inc_Description, sep=". ")) %>%
mutate(Income=as.numeric(Income)) %>%
mutate(Employment=as.character(Employment)) %>%
mutate(Emp_Description = paste(Employment, Emp_Description, sep=". ")) %>%
mutate(Employment=as.numeric(Employment)) %>%
mutate(`Food&Nutrition`=as.character(`Food&Nutrition`)) %>%
mutate(F.N_Description = paste(`Food&Nutrition`, F.N_Description, sep=". ")) %>%
mutate(`Food&Nutrition`=as.numeric(`Food&Nutrition`))
ccdata3 <- ccdata3 %>%
mutate_if(sapply(ccdata3, is.character), as.factor)
ccdata3 <- ccdata3 %>%
group_by(HMIS_ClientID) %>%
mutate(rank = rank(Date)) %>%
ungroup
ccdata <- read_excel("~/Google Drive/SI/DataScience/ADP/Catholic_Charities_Chicago/Family SSS/Family Self-Sufficiency Scale ALL.xlsx")
# ccdata %>%
#   group_by(HMIS_ClientID) %>%
#   tally() %>%
#   arrange(desc(n))
score <- read.csv("~/Google Drive/SI/DataScience/ADP/Catholic_Charities_Chicago/Family SSS/scoreformerge.csv")
score1 <- score %>%
select(Shelter, Shelter_Description)
ccdata2 <- right_join(score1, ccdata, by = "Shelter")
score1 <- score %>%
select("Food.Nutrition", "F.N_Description") %>%
rename("Food&Nutrition" = "Food.Nutrition")
ccdata2 <- right_join(score1, ccdata2, by = "Food&Nutrition")
score1 <- score %>%
select(Employment, Emp_Description)
ccdata2 <- right_join(score1, ccdata2, by = "Employment")
score1 <- score %>%
select(Income, Inc_Description)
ccdata2 <- right_join(score1, ccdata2, by = "Income")
score1 <- score %>%
select(AdultFormalEducation, AFE_Description)
ccdata2 <- right_join(score1, ccdata2, by = "AdultFormalEducation")
score1 <- score %>%
select(Transportation, Trans_Description)
ccdata2 <- right_join(score1, ccdata2, by = "Transportation")
score1 <- score %>%
select(ChildCare, ChC_Description)
ccdata2 <- right_join(score1, ccdata2, by = "ChildCare")
score1 <- score %>%
select(SubstanceAbuse, SA_Description)
ccdata2 <- right_join(score1, ccdata2, by = "SubstanceAbuse")
score1 <- score %>%
select(PhysicalMentalHealth, PhMH_Description)
ccdata2 <- right_join(score1, ccdata2, by ="PhysicalMentalHealth")
score1 <- score %>%
select(HealthInsurance, HI_Description)
ccdata2 <- right_join(score1, ccdata2, by = "HealthInsurance")
score1 <- score %>%
select(FamilySocialFunctioning, FSF_Description)
ccdata2 <- right_join(score1, ccdata2, by = "FamilySocialFunctioning")
# ccdata2 <- ccdata2 %>%
#    mutate(Shelter_Description = ifelse(is.na(Shelter_Description), Shelter, Shelter_Description))
ccdata3 <- ccdata2 %>%
mutate(Shelter=as.character(Shelter)) %>%
mutate(Shelter_Description = paste(Shelter, Shelter_Description, sep=". ")) %>%
mutate(Shelter=as.numeric(Shelter)) %>%
mutate(FamilySocialFunctioning=as.character(FamilySocialFunctioning)) %>%
mutate(FSF_Description = paste(FamilySocialFunctioning, FSF_Description, sep=". ")) %>%
mutate(FamilySocialFunctioning=as.numeric(FamilySocialFunctioning)) %>%
mutate(HealthInsurance=as.character(HealthInsurance)) %>%
mutate(HI_Description = paste(HealthInsurance, HI_Description, sep=". ")) %>%
mutate(HealthInsurance=as.numeric(HealthInsurance)) %>%
mutate(PhysicalMentalHealth=as.character(PhysicalMentalHealth)) %>%
mutate(PhMH_Description = paste(PhysicalMentalHealth, PhMH_Description, sep=". ")) %>%
mutate(PhysicalMentalHealth=as.numeric(PhysicalMentalHealth)) %>%
mutate(SubstanceAbuse=as.character(SubstanceAbuse)) %>%
mutate(SA_Description = paste(SubstanceAbuse, SA_Description, sep=". ")) %>%
mutate(SubstanceAbuse=as.numeric(SubstanceAbuse)) %>%
mutate(ChildCare=as.character(ChildCare)) %>%
mutate(ChC_Description = paste(ChildCare, ChC_Description, sep=". ")) %>%
mutate(ChildCare=as.numeric(ChildCare)) %>%
mutate(Transportation=as.character(Transportation)) %>%
mutate(Trans_Description = paste(Transportation, Trans_Description, sep=". ")) %>%
mutate(Transportation=as.numeric(Transportation)) %>%
mutate(AdultFormalEducation=as.character(AdultFormalEducation)) %>%
mutate(AFE_Description = paste(AdultFormalEducation, AFE_Description, sep=". ")) %>%
mutate(AdultFormalEducation=as.numeric(AdultFormalEducation)) %>%
mutate(Income=as.character(Income)) %>%
mutate(Inc_Description = paste(Income, Inc_Description, sep=". ")) %>%
mutate(Income=as.numeric(Income)) %>%
mutate(Employment=as.character(Employment)) %>%
mutate(Emp_Description = paste(Employment, Emp_Description, sep=". ")) %>%
mutate(Employment=as.numeric(Employment)) %>%
mutate(`Food&Nutrition`=as.character(`Food&Nutrition`)) %>%
mutate(F.N_Description = paste(`Food&Nutrition`, F.N_Description, sep=". ")) %>%
mutate(`Food&Nutrition`=as.numeric(`Food&Nutrition`))
ccdata3 <- ccdata3 %>%
mutate_if(sapply(ccdata3, is.character), as.factor)
ccdata3 <- ccdata3 %>%
group_by(HMIS_ClientID) %>%
mutate(rank = rank(Date)) %>%
ungroup
sdall1 <- ccdata9 %>%
ungroup() %>%
filter(rank==1|rank==1.5) %>%
filter(count==2) %>%
select_if(is.numeric) %>%
select(-HMIS_ClientID, -ID, -rank, -count) %>%
summarise_all(funs(sd(.)))
sdall1 <- sdall1 %>%
gather(Shelter, `Food&Nutrition`, Employment, Income, AdultFormalEducation, Transportation, ChildCare, SubstanceAbuse, PhysicalMentalHealth, HealthInsurance, FamilySocialFunctioning, PriorityLevelScore, BarriersScore, AchievementsScore, FinalScore, 1:15) %>%
rename(score = Shelter, sd= `Food&Nutrition`)
mergeall1 <- right_join(meanall1, sdall1, by = "score")
View(dt)
DT <- data.table(ccdata10, key="HMIS_ClientID")
dt <- DT[, list(date1=max(date1),
date2=max(date2),
date3=max(date3),
date4=max(date4),
date5=max(date5)), by=HMIS_ClientID]
#finding the actual days between
dt <- dt %>%
mutate(DaysBetween1and2 = ifelse(date2!=0 & date1!=0, date2-date1, NA)) %>%
mutate(DaysBetween2and3 = ifelse(date3!=0 & date2!=0, date3-date2, NA)) %>%
mutate(DaysBetween3and4 = ifelse(date4!=0 & date3!=0, date4-date3, NA)) %>%
mutate(DaysBetween4and5 = ifelse(date5!=0 & date4!=0, date5-date4, NA))
hist(dt$DaysBetween1and2)
hist(dt$DaysBetween2and3)
hist(dt$DaysBetween1and2)
View(ccdata10)
View(ccdata9)
jonstest <- ccdata9 %>%
group_by(HMIS_ClientID) %>%
mutate(dayssince1 = cumsum(Date))
jonstest <- ccdata9 %>%
group_by(HMIS_ClientID) %>%
mutate(dayssince1 = Date-min(Date))
View(jonstest)
jonstest <- ccdata9 %>%
group_by(HMIS_ClientID) %>%
mutate(dayssince1 = Date-min(Date)) %>%
mutate(dayssince1 = dayssince1/86400)
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter)) +
geom_point() +
geom_smooth()
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter, color = HMIS_ClientID)) +
geom_point() +
geom_smooth()
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter, color = as.factor(HMIS_ClientID))) +
geom_point() +
geom_smooth()
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter, color = as.factor(HMIS_ClientID))) +
geom_point() +
geom_smooth() +
theme(legend.position = FALSE)
axis.text.x
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter, color = as.factor(HMIS_ClientID))) +
geom_point() +
geom_smooth() +
theme(axis.text.x = element_blank())
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter, color = as.factor(HMIS_ClientID))) +
geom_point() +
geom_smooth() +
guides(fill=guide_legend(title = NULL))+
# ccdata9 %>%
#   group_by(count) %>%
#   tally()
## a long form attempt at finding the days between ss assessments
# ccdata10 <- ccdata9 %>%
#   group_by(HMIS_ClientID) %>%
#   mutate(date1 = ifelse(rank==1|rank==1.5, as_date(Date), 0)) %>%
#   mutate(date2 = ifelse(rank==2|rank==2.5, as_date(Date), 0)) %>%
#   mutate(date3 = ifelse(rank==3|rank==3.5, as_date(Date), 0)) %>%
#   mutate(date4 = ifelse(rank==4|rank==4.5, as_date(Date), 0)) %>%
#   mutate(date5 = ifelse(rank==5|rank==5.5, as_date(Date), 0)) %>%
#   select(HMIS_ClientID, Date, date1, date2, date3, date4, date5)
##i had to use data table package to collapse shit ugh
DT <- data.table(ccdata10, key="HMIS_ClientID")
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter, color = as.factor(HMIS_ClientID))) +
geom_point() +
geom_smooth() +
guides(fill=guide_legend(title = NULL))
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter, color = as.factor(HMIS_ClientID))) +
geom_point() +
geom_smooth() +
guides(color=guide_legend(title = NULL))
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter, color = as.factor(HMIS_ClientID))) +
geom_point() +
geom_smooth() +
guides(color=FALSE))
jonstest %>%
ggplot(aes(x=dayssince1, y=Shelter, color = as.factor(HMIS_ClientID))) +
geom_point() +
geom_smooth() +
guides(color=FALSE)
View(mergeall)
View(regress)
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
getwd
getwd()
setwd("Github/netfilysite/")
blogdown:::serve_site()
build_site
build_site()
library(blogdown)
build_site()
